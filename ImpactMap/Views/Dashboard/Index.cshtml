@model ImpactMap.Models.Entity

@{
    ViewBag.Title = "Index";
}
<span style="vertical-align: top;">

    <span class="spaceDivs dbSpans">
        <dt class="dl-horizontal">

            <dd>
                @Html.DisplayFor(model => model.name)
            </dd>

            <dd>
                @Html.DisplayFor(model => model.address1)
            </dd>

            <dd>
                @Html.DisplayFor(model => model.address2)
            </dd>

            <dd>
                @Html.DisplayFor(model => model.city), @Html.DisplayFor(model => model.state)   @Html.DisplayFor(model => model.zip)
            </dd>
            <br />
            <dd>
                @Html.DisplayFor(model => model.description)
            </dd>

            @Html.ActionLink("Edit", "Edit", "Entity", new { @class = "addpadding button" })
    </span>

    <span class="spaceDivs dbSpans">
        <h2>My Investment Tags</h2>
        <div>
            <table class="table">
                @foreach (var investment in Model.investmentsOut)
                {
                    foreach (var category in investment.categories)
                    {
                        <tr>
                            <td>
                                @Html.DisplayFor(modelItem => category.name)
                            </td>
                            <td>

                            </td>
                        </tr>

                    }
                }
            </table>
        </div>

        <div class="addpadding">
            @Html.ActionLink("View Tags", "Index", "Categories", "Categories", new { @class = "button" })
            @Html.ActionLink("Create New Tag", "Create", "Categories", "Categories", new { @class = "button" })
        </div>
    </span>

    @*<span class="spaceDivs dbSpans">
        @if ( user.ID has new reports/ report requests)
                {
                    <span style="display:block; text-align:right;">
                        <span class="fa fa-exclamation"></span>
                        <span class="fa fa-file-o"></span>
                    </span>
                }
            else
                {
                    <span style="display:block; text-align:right;">
                        <span class="fa fa-file-o"></span>
                     </span>
                }

        <span style="display:block; text-align:right;">
            <span class="fa fa-exclamation"></span>
            <span class="fa fa-file-o"></span>
        </span>*@
    @*</span>*@
</span>



<div class="spaceDivs">
    <h2>Investments Sent</h2>
    <div class="addpadding">

        @Html.ActionLink("Create New Investment", "Create", "Investments", "Investments", new { @class = "button" })

        @Html.ActionLink("View All Investments", "Index", "Investments", "Investments", new { @class = "button" })

        @if (Model.investmentsOut.Count != 0)
        {
            <table class="table">
                <tr>
                    <th>
                        Investment Date
                    </th>
                    <th>
                        Value
                    </th>
                    <th>
                        Recipient
                    </th>
                    <th>
                        Reports
                    </th>
                </tr>

                @*Displays each investment in the table*@
                @foreach (var item in Model.investmentsOut.Take(5))
                {

                    <tr>
                            <td>
                                @item.date.ToShortDateString()
                            </td>
                            <td>
                                <p>$@Html.DisplayFor(modelItem => item.amount)</p>
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.entityTo.name)
                            </td>
                            <td>
                                @if (item.projectTo.report != null)
                                {
                                    string reportID = Convert.ToString(item.projectTo.report.ID);
                                        @Html.ActionLink("Report", reportID, "Details", "Report")
                                }
                                else
                                {
                                        <span>No report available.</span>
                                }
                            </td>
                    </tr>

                }


            </table>
        }
        else
        {
                                        <p>You Currently Have No Investments</p>
        }

    </div>
</div>
<div class="spaceDivs">
    <h2>My Projects</h2>
    <div class="addpadding">
        @Html.ActionLink("Create New Project", "Create", "Projects", "Projects", new { @class = "button" })

        @Html.ActionLink("View All Projects", "Index", "Projects", "Projects", new { @class = "button" })

        @if (Model.projects.Count != 0)
        {
            <table class="table">
                <tr>
                    <th>
                        Project Name
                    </th>
                    <th>
                        
                    </th>
                </tr>
                @if (Model.investmentsOut != null)
                {
                    foreach (var item in Model.projects.Take(5))
                    {
                        <tr>
                            <td>
                                @Html.DisplayFor(modelItem => item.name)
                            </td>
                            <td>

                                @foreach (var thing in item.investmentsIn)
                                {
                                    <p>$@Html.DisplayFor(modelItem => thing.amount)</p><br />
                                }
                            </td>
                            <td>
                                @foreach (var thing in item.investmentsIn)
                                {
                                    @thing.date.ToShortDateString()<br />
                                }
                            </td>
                            <td>
                                @foreach (var thing in item.investmentsIn)
                                {
                                    @Html.DisplayFor(modelItem => thing.entityFrom.name)<br />
                                }
                            </td>
                            <td>
                                @if (item.report != null)
                                {
                                    string reportID = Convert.ToString(item.report.ID);
                                }
                                
                            </td>
                        </tr>   
                    }
                }
            </table>
        }
        else
        {
                    <p>You currently have no projects.</p>
        }
    </div>
</div>
